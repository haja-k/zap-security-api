version: "3.8"
services:
  zap:
    container_name: zap-scanner
    build: .
    ports:
      - "8088:8088"  # Expose ZAP API
    cap_add:  # Add network privileges
      - NET_RAW
      - NET_ADMIN
    restart: unless-stopped

  zap-service:
    container_name: zap-flask
    build:
      context: .
      dockerfile: Dockerfile.flask
    ports:
      - "5000:5000"  # Expose Flask
    depends_on:
      - zap
    restart: unless-stopped